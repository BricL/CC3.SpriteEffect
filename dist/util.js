"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.autoAssignTextureAsset = exports.autoAssignEffectAsset = exports.reimportAsset = void 0;
async function reimportAsset(effectCompName) {
    const uuids = Editor.Selection.getSelected('node');
    const node = await Editor.Message.request('scene', 'query-node', uuids[0]);
    if (!node) {
        console.warn(`未選中節點`);
        return;
    }
    const index = node.__comps__.findIndex((v) => v.type === effectCompName);
    if (index === -1) {
        console.warn(`節點未掛載${effectCompName}組件`);
        return;
    }
    const effectFileName = effectCompName.replace(/([A-Z])/g, '_$1').toLowerCase().slice(1);
    const url = `db://assets/sprite_effect/effect/${effectFileName}.effect`;
    console.log(`url: ${url}`);
    const res = await Editor.Message.request('asset-db', 'query-asset-info', url);
    await Editor.Message.request("asset-db", "reimport-asset", res.uuid);
}
exports.reimportAsset = reimportAsset;
async function autoAssignEffectAsset(effectCompName) {
    try {
        console.log('Effect自動掛載啟動');
        const uuids = Editor.Selection.getSelected('node');
        const node = await Editor.Message.request('scene', 'query-node', uuids[0]);
        if (!node) {
            console.warn(`未選中節點`);
            return;
        }
        const index = node.__comps__.findIndex((v) => v.type === effectCompName);
        if (index === -1) {
            console.warn(`節點未掛載${effectCompName}組件`);
            return;
        }
        const effectFileName = effectCompName.replace(/([A-Z])/g, '_$1').toLowerCase().slice(1);
        const url = `db://assets/sprite_effect/effect/${effectFileName}.effect`;
        console.log(`url: ${url}`);
        const res = await Editor.Message.request('asset-db', 'query-asset-info', url);
        const success = await Editor.Message.request('scene', 'set-property', {
            uuid: node.uuid.value,
            path: `__comps__.${index}.effectAsset`,
            dump: {
                type: res.type,
                value: {
                    uuid: res.uuid,
                },
            },
        });
        if (success) {
            console.log(`Effect自動掛載成功`);
        }
        else {
            console.log(`Effect自動掛載失敗`);
        }
    }
    catch (ex) {
        console.error(`autoAssignEffectAsset: ${ex}`);
    }
}
exports.autoAssignEffectAsset = autoAssignEffectAsset;
async function autoAssignTextureAsset(effectCompName, propOfName, nameOfAsset) {
    try {
        console.log('Asset自動掛載啟動');
        const uuids = Editor.Selection.getSelected('node');
        const node = await Editor.Message.request('scene', 'query-node', uuids[0]);
        if (!node) {
            console.warn(`未選中節點`);
            return;
        }
        const index = node.__comps__.findIndex((v) => v.type === effectCompName);
        if (index === -1) {
            console.warn(`節點未掛載${effectCompName}組件`);
            return;
        }
        const url = `db://assets/sprite_effect/texture/${nameOfAsset}`;
        console.log(`url: ${url}`);
        const res = await Editor.Message.request('asset-db', 'query-asset-info', url);
        const success = await Editor.Message.request('scene', 'set-property', {
            uuid: node.uuid.value,
            path: `__comps__.${index}.${propOfName}`,
            dump: {
                type: res.type,
                value: {
                    uuid: res.uuid,
                },
            },
        });
        if (success) {
            console.log(`Texture自動掛載成功`);
        }
        else {
            console.log(`Texture自動掛載失敗`);
        }
    }
    catch (ex) {
        console.error(`autoAssignTextureAsset: ${ex}`);
    }
}
exports.autoAssignTextureAsset = autoAssignTextureAsset;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NvdXJjZS91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFPLEtBQUssVUFBVSxhQUFhLENBQUMsY0FBc0I7SUFDdEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkQsTUFBTSxJQUFJLEdBQUcsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNFLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFDUCxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RCLE9BQU87S0FDVjtJQUVELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQyxDQUFDO0lBQzlFLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFO1FBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLGNBQWMsSUFBSSxDQUFDLENBQUM7UUFDekMsT0FBTztLQUNWO0lBRUQsTUFBTSxjQUFjLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLE1BQU0sR0FBRyxHQUFHLG9DQUFvQyxjQUFjLFNBQVMsQ0FBQztJQUN4RSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUUzQixNQUFNLEdBQUcsR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxrQkFBa0IsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM5RSxN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InNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWltcG9ydEFzc2V0KGVmZmVjdENvbXBOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCB1dWlkcyA9IEVkaXRvci5TZWxlY3Rpb24uZ2V0U2VsZWN0ZWQoJ25vZGUnKTtcbiAgICBjb25zdCBub2RlID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAncXVlcnktbm9kZScsIHV1aWRzWzBdKTtcbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDmnKrpgbjkuK3nr4Dpu55gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gbm9kZS5fX2NvbXBzX18uZmluZEluZGV4KCh2OiBhbnkpID0+IHYudHlwZSA9PT0gZWZmZWN0Q29tcE5hbWUpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDnr4Dpu57mnKrmjpvovIkke2VmZmVjdENvbXBOYW1lfee1hOS7tmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZWZmZWN0RmlsZU5hbWUgPSBlZmZlY3RDb21wTmFtZS5yZXBsYWNlKC8oW0EtWl0pL2csICdfJDEnKS50b0xvd2VyQ2FzZSgpLnNsaWNlKDEpO1xuICAgIGNvbnN0IHVybCA9IGBkYjovL2Fzc2V0cy9zcHJpdGVfZWZmZWN0L2VmZmVjdC8ke2VmZmVjdEZpbGVOYW1lfS5lZmZlY3RgO1xuICAgIGNvbnNvbGUubG9nKGB1cmw6ICR7dXJsfWApO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXQtaW5mbycsIHVybCk7XG4gICAgYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdChcImFzc2V0LWRiXCIsIFwicmVpbXBvcnQtYXNzZXRcIiwgcmVzIS51dWlkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dG9Bc3NpZ25FZmZlY3RBc3NldChlZmZlY3RDb21wTmFtZTogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0VmZmVjdOiHquWLleaOm+i8ieWVn+WLlScpO1xuXG4gICAgICAgIGNvbnN0IHV1aWRzID0gRWRpdG9yLlNlbGVjdGlvbi5nZXRTZWxlY3RlZCgnbm9kZScpO1xuICAgICAgICBjb25zdCBub2RlID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAncXVlcnktbm9kZScsIHV1aWRzWzBdKTtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYOacqumBuOS4reevgOm7nmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBub2RlLl9fY29tcHNfXy5maW5kSW5kZXgoKHY6IGFueSkgPT4gdi50eXBlID09PSBlZmZlY3RDb21wTmFtZSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihg56+A6bue5pyq5o6b6LyJJHtlZmZlY3RDb21wTmFtZX3ntYTku7ZgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVmZmVjdEZpbGVOYW1lID0gZWZmZWN0Q29tcE5hbWUucmVwbGFjZSgvKFtBLVpdKS9nLCAnXyQxJykudG9Mb3dlckNhc2UoKS5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgdXJsID0gYGRiOi8vYXNzZXRzL3Nwcml0ZV9lZmZlY3QvZWZmZWN0LyR7ZWZmZWN0RmlsZU5hbWV9LmVmZmVjdGA7XG4gICAgICAgIGNvbnNvbGUubG9nKGB1cmw6ICR7dXJsfWApO1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ2Fzc2V0LWRiJywgJ3F1ZXJ5LWFzc2V0LWluZm8nLCB1cmwpO1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAnc2V0LXByb3BlcnR5Jywge1xuICAgICAgICAgICAgdXVpZDogbm9kZS51dWlkLnZhbHVlIGFzIHN0cmluZyxcbiAgICAgICAgICAgIHBhdGg6IGBfX2NvbXBzX18uJHtpbmRleH0uZWZmZWN0QXNzZXRgLFxuICAgICAgICAgICAgZHVtcDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlcyEudHlwZSxcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB1dWlkOiByZXMhLnV1aWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRWZmZWN06Ieq5YuV5o6b6LyJ5oiQ5YqfYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRWZmZWN06Ieq5YuV5o6b6LyJ5aSx5pWXYCk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBhdXRvQXNzaWduRWZmZWN0QXNzZXQ6ICR7ZXh9YCk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0b0Fzc2lnblRleHR1cmVBc3NldChlZmZlY3RDb21wTmFtZTogc3RyaW5nLCBwcm9wT2ZOYW1lOiBzdHJpbmcsIG5hbWVPZkFzc2V0OiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnQXNzZXToh6rli5XmjpvovInllZ/li5UnKTtcblxuICAgICAgICBjb25zdCB1dWlkcyA9IEVkaXRvci5TZWxlY3Rpb24uZ2V0U2VsZWN0ZWQoJ25vZGUnKTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ3F1ZXJ5LW5vZGUnLCB1dWlkc1swXSk7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGDmnKrpgbjkuK3nr4Dpu55gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gbm9kZS5fX2NvbXBzX18uZmluZEluZGV4KCh2OiBhbnkpID0+IHYudHlwZSA9PT0gZWZmZWN0Q29tcE5hbWUpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYOevgOm7nuacquaOm+i8iSR7ZWZmZWN0Q29tcE5hbWV957WE5Lu2YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cmwgPSBgZGI6Ly9hc3NldHMvc3ByaXRlX2VmZmVjdC90ZXh0dXJlLyR7bmFtZU9mQXNzZXR9YDtcbiAgICAgICAgY29uc29sZS5sb2coYHVybDogJHt1cmx9YCk7XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXQtaW5mbycsIHVybCk7XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdzZXQtcHJvcGVydHknLCB7XG4gICAgICAgICAgICB1dWlkOiBub2RlLnV1aWQudmFsdWUgYXMgc3RyaW5nLFxuICAgICAgICAgICAgcGF0aDogYF9fY29tcHNfXy4ke2luZGV4fS4ke3Byb3BPZk5hbWV9YCxcbiAgICAgICAgICAgIGR1bXA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZXMhLnR5cGUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdXVpZDogcmVzIS51dWlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFRleHR1cmXoh6rli5XmjpvovInmiJDlip9gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUZXh0dXJl6Ieq5YuV5o6b6LyJ5aSx5pWXYCk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBhdXRvQXNzaWduVGV4dHVyZUFzc2V0OiAke2V4fWApO1xuICAgIH1cbn0iXX0=