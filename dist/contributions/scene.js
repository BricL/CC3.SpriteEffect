"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.methods = exports.unload = exports.load = void 0;
const cc_1 = require("cc");
const util_1 = require("../util");
const classIdMap = {
    ["SpriteEffectColor"]: 'c6496Bv0dxAApSoUg42h5Lz',
    ["SpriteEffectColorizing"]: '20603zBoKFLN4Q5V6kEd9S7',
    ["SpriteEffectTransition"]: '6f463dQDhFIn5aLdZNtGpuS',
    ["SpriteEffectDissolve"]: '18a89aWE/xKVqkaiGTOi3+S',
    ["SpriteEffectDistort"]: 'c3398hqo91I14qg5Yx9QMZ0',
    ["SpriteEffectFlowLight"]: 'fad028dNo1AO7/Ha84/lbRO',
    ["SpriteEffectGaussianBlur"]: 'b4cd9DMOSZDZJNBTtka9K8l',
    ["SpriteEffectShadow"]: '6acadLrR85GG5gtfeWP+eMN',
    ["SpriteEffectTest"]: '0c212nm0DhIKqodQ9hpgPQf',
    ["SpriteEffectWaterFlow"]: '76000uzo1VDjKouHxxGxirw',
    ["SpriteEffectWaterRipple"]: '4cb70X8jgtA6YJR2wD9bTyI',
    ["SpriteEffectWaterWave"]: 'e7c2fH4W0BPXKTIAIKn2ff5',
};
function load() {
}
exports.load = load;
function unload() {
}
exports.unload = unload;
exports.methods = {
    async addEffect(nameOfEffect) {
        console.log(`Adding effect: ${nameOfEffect}`);
        let canvasNode = null;
        const rootNode = cc_1.director.getScene();
        for (const childNode of rootNode.children) {
            if (childNode.getComponent(cc_1.Canvas)) {
                canvasNode = childNode;
                break;
            }
        }
        if (!canvasNode) {
            canvasNode = new cc_1.Node();
            canvasNode.setParent(rootNode);
            canvasNode.name = 'Canvas';
            canvasNode.layer = cc_1.Layers.Enum.UI_2D;
            let canvasComp = canvasNode.addComponent(cc_1.Canvas);
            let camNode = new cc_1.Node();
            camNode.setParent(canvasNode);
            camNode.name = 'Camera';
            camNode.layer = cc_1.Layers.Enum.UI_2D;
            let camComp = camNode.addComponent(cc_1.Camera);
            camComp.priority = 65535;
            camComp.visibility = cc_1.Layers.Enum.UI_2D | cc_1.Layers.Enum.UI_3D;
            camComp.projection = cc_1.Camera.ProjectionType.ORTHO;
            canvasComp.cameraComponent = camComp;
        }
        let nameOfCount = 0;
        for (const childNode of canvasNode.children) {
            if (childNode.name.includes(nameOfEffect)) {
                nameOfCount++;
            }
        }
        let node = new cc_1.Node();
        node.setParent(canvasNode);
        node.name = nameOfCount === 0 ? nameOfEffect : `${nameOfEffect}-${nameOfCount.toString().padStart(3, '0')}`;
        node.layer = cc_1.Layers.Enum.UI_2D;
        let classID = classIdMap[nameOfEffect] || '';
        if (classID !== '') {
            await Editor.Message.request('scene', 'create-component', {
                uuid: node.uuid,
                component: classID
            });
            const res = await util_1.assignEffectAsset(nameOfEffect, node.uuid);
            if (res) {
                util_1.reimportAsset();
                console.log(`Effect自動掛載成功`);
            }
            else {
                console.log(`Effect自動掛載失敗`);
            }
        }
        else {
            console.error('No class ID found for effect: ' + nameOfEffect);
        }
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NlbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zb3VyY2UvY29udHJpYnV0aW9ucy9zY2VuZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQkFBa0U7QUFDbEUsa0NBQTJEO0FBRTNELE1BQU0sVUFBVSxHQUE4QjtJQUMxQyxDQUFDLG1CQUFtQixDQUFDLEVBQUUseUJBQXlCO0lBQ2hELENBQUMsd0JBQXdCLENBQUMsRUFBRSx5QkFBeUI7SUFDckQsQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLHlCQUF5QjtJQUNyRCxDQUFDLHNCQUFzQixDQUFDLEVBQUUseUJBQXlCO0lBQ25ELENBQUMscUJBQXFCLENBQUMsRUFBRSx5QkFBeUI7SUFDbEQsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLHlCQUF5QjtJQUNwRCxDQUFDLDBCQUEwQixDQUFDLEVBQUUseUJBQXlCO0lBQ3ZELENBQUMsb0JBQW9CLENBQUMsRUFBRSx5QkFBeUI7SUFDakQsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLHlCQUF5QjtJQUMvQyxDQUFDLHVCQUF1QixDQUFDLEVBQUUseUJBQXlCO0lBQ3BELENBQUMseUJBQXlCLENBQUMsRUFBRSx5QkFBeUI7SUFDdEQsQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLHlCQUF5QjtDQUN2RCxDQUFBO0FBRUQsU0FBZ0IsSUFBSTtBQUVwQixDQUFDO0FBRkQsb0JBRUM7QUFFRCxTQUFnQixNQUFNO0FBRXRCLENBQUM7QUFGRCx3QkFFQztBQUVZLFFBQUEsT0FBTyxHQUFHO0lBQ25CLEtBQUssQ0FBQyxTQUFTLENBQUMsWUFBb0I7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUU5QyxJQUFJLFVBQVUsR0FBZ0IsSUFBSSxDQUFDO1FBQ25DLE1BQU0sUUFBUSxHQUFHLGFBQVEsQ0FBQyxRQUFRLEVBQVUsQ0FBQztRQUU3QyxLQUFLLE1BQU0sU0FBUyxJQUFJLFFBQVEsQ0FBQyxRQUFR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ImltcG9ydCB7IENhbWVyYSwgQ2FudmFzLCBkaXJlY3RvciwgZmluZCwgTGF5ZXJzLCBOb2RlIH0gZnJvbSBcImNjXCI7XHJcbmltcG9ydCB7IGFzc2lnbkVmZmVjdEFzc2V0LCByZWltcG9ydEFzc2V0IH0gZnJvbSBcIi4uL3V0aWxcIjtcclxuXHJcbmNvbnN0IGNsYXNzSWRNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XHJcbiAgICBbXCJTcHJpdGVFZmZlY3RDb2xvclwiXTogJ2M2NDk2QnYwZHhBQXBTb1VnNDJoNUx6JyxcclxuICAgIFtcIlNwcml0ZUVmZmVjdENvbG9yaXppbmdcIl06ICcyMDYwM3pCb0tGTE40UTVWNmtFZDlTNycsXHJcbiAgICBbXCJTcHJpdGVFZmZlY3RUcmFuc2l0aW9uXCJdOiAnNmY0NjNkUURoRkluNWFMZFpOdEdwdVMnLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0RGlzc29sdmVcIl06ICcxOGE4OWFXRS94S1Zxa2FpR1RPaTMrUycsXHJcbiAgICBbXCJTcHJpdGVFZmZlY3REaXN0b3J0XCJdOiAnYzMzOThocW85MUkxNHFnNVl4OVFNWjAnLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0Rmxvd0xpZ2h0XCJdOiAnZmFkMDI4ZE5vMUFPNy9IYTg0L2xiUk8nLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0R2F1c3NpYW5CbHVyXCJdOiAnYjRjZDlETU9TWkRaSk5CVHRrYTlLOGwnLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0U2hhZG93XCJdOiAnNmFjYWRMclI4NUdHNWd0ZmVXUCtlTU4nLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0VGVzdFwiXTogJzBjMjEybm0wRGhJS3FvZFE5aHBnUFFmJyxcclxuICAgIFtcIlNwcml0ZUVmZmVjdFdhdGVyRmxvd1wiXTogJzc2MDAwdXpvMVZEaktvdUh4eEd4aXJ3JyxcclxuICAgIFtcIlNwcml0ZUVmZmVjdFdhdGVyUmlwcGxlXCJdOiAnNGNiNzBYOGpndEE2WUpSMndEOWJUeUknLFxyXG4gICAgW1wiU3ByaXRlRWZmZWN0V2F0ZXJXYXZlXCJdOiAnZTdjMmZINFcwQlBYS1RJQUlLbjJmZjUnLFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZCgpIHtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWQoKSB7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWV0aG9kcyA9IHtcclxuICAgIGFzeW5jIGFkZEVmZmVjdChuYW1lT2ZFZmZlY3Q6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBBZGRpbmcgZWZmZWN0OiAke25hbWVPZkVmZmVjdH1gKTtcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhc05vZGU6IE5vZGUgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCByb290Tm9kZSA9IGRpcmVjdG9yLmdldFNjZW5lKCkgYXMgTm9kZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2Ygcm9vdE5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5nZXRDb21wb25lbnQoQ2FudmFzKSkge1xyXG4gICAgICAgICAgICAgICAgY2FudmFzTm9kZSA9IGNoaWxkTm9kZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNhbnZhc05vZGUpIHtcclxuICAgICAgICAgICAgY2FudmFzTm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIGNhbnZhc05vZGUuc2V0UGFyZW50KHJvb3ROb2RlKTtcclxuICAgICAgICAgICAgY2FudmFzTm9kZS5uYW1lID0gJ0NhbnZhcyc7XHJcbiAgICAgICAgICAgIGNhbnZhc05vZGUubGF5ZXIgPSBMYXllcnMuRW51bS5VSV8yRDtcclxuICAgICAgICAgICAgbGV0IGNhbnZhc0NvbXAgPSBjYW52YXNOb2RlLmFkZENvbXBvbmVudChDYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhbU5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgICAgICBjYW1Ob2RlLnNldFBhcmVudChjYW52YXNOb2RlKTtcclxuICAgICAgICAgICAgY2FtTm9kZS5uYW1lID0gJ0NhbWVyYSc7XHJcbiAgICAgICAgICAgIGNhbU5vZGUubGF5ZXIgPSBMYXllcnMuRW51bS5VSV8yRDtcclxuICAgICAgICAgICAgbGV0IGNhbUNvbXAgPSBjYW1Ob2RlLmFkZENvbXBvbmVudChDYW1lcmEpO1xyXG4gICAgICAgICAgICBjYW1Db21wLnByaW9yaXR5ID0gNjU1MzU7XHJcbiAgICAgICAgICAgIGNhbUNvbXAudmlzaWJpbGl0eSA9IExheWVycy5FbnVtLlVJXzJEIHwgTGF5ZXJzLkVudW0uVUlfM0Q7XHJcbiAgICAgICAgICAgIGNhbUNvbXAucHJvamVjdGlvbiA9IENhbWVyYS5Qcm9qZWN0aW9uVHlwZS5PUlRITztcclxuXHJcbiAgICAgICAgICAgIGNhbnZhc0NvbXAuY2FtZXJhQ29tcG9uZW50ID0gY2FtQ29tcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuYW1lT2ZDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2YgY2FudmFzTm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGROb2RlLm5hbWUuaW5jbHVkZXMobmFtZU9mRWZmZWN0KSkge1xyXG4gICAgICAgICAgICAgICAgbmFtZU9mQ291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgICAgIG5vZGUuc2V0UGFyZW50KGNhbnZhc05vZGUpO1xyXG4gICAgICAgIG5vZGUubmFtZSA9IG5hbWVPZkNvdW50ID09PSAwID8gbmFtZU9mRWZmZWN0IDogYCR7bmFtZU9mRWZmZWN0fS0ke25hbWVPZkNvdW50LnRvU3RyaW5nKCkucGFkU3RhcnQoMywgJzAnKX1gO1xyXG4gICAgICAgIG5vZGUubGF5ZXIgPSBMYXllcnMuRW51bS5VSV8yRDtcclxuXHJcbiAgICAgICAgbGV0IGNsYXNzSUQgPSBjbGFzc0lkTWFwW25hbWVPZkVmZmVjdF0gfHwgJyc7XHJcbiAgICAgICAgaWYgKGNsYXNzSUQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ2NyZWF0ZS1jb21wb25lbnQnLCB7XHJcbiAgICAgICAgICAgICAgICB1dWlkOiBub2RlLnV1aWQsXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGNsYXNzSURcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhc3NpZ25FZmZlY3RBc3NldChuYW1lT2ZFZmZlY3QsIG5vZGUudXVpZCk7XHJcbiAgICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHJlaW1wb3J0QXNzZXQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFZmZlY3Toh6rli5XmjpvovInmiJDlip9gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFZmZlY3Toh6rli5XmjpvovInlpLHmlZdgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gY2xhc3MgSUQgZm91bmQgZm9yIGVmZmVjdDogJyArIG5hbWVPZkVmZmVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19